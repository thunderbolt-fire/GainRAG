
/root/siton-data-0553377b2d664236bad5b5d0ba8aa419/workspace/GainRAG/GainRAG/gainRAG/llm_supervision/construct_hf.py
生成困惑度分数



/root/siton-data-0553377b2d664236bad5b5d0ba8aa419/workspace/GainRAG/GainRAG/data/data_filter_test.py
去除掉本身不包含答案的段落以及模型自己生成的背景
/root/siton-data-0553377b2d664236bad5b5d0ba8aa419/workspace/GainRAG/GainRAG/data/without_pse_data_train_nq_filter.json



/root/siton-data-0553377b2d664236bad5b5d0ba8aa419/workspace/GainRAG/GainRAG/data/data2selector_test.py

组合分数，归一化，生成最终评分  组合两个基础分数，一个可选惩罚项
--train_data /root/siton-data-0553377b2d664236bad5b5d0ba8aa419/workspace/GainRAG/GainRAG/data/without_pse_nq_train_selector_softmax_combined.jsonl \
最好的效果的数据集

pos 和 neg 里面都可以有多个段落， 然后固定从 pos 里面抽取一个段落，然后从 neg 抽取多个段落（train_group_size个 ）

**train_group_size 不是 batch size 而是抽取的段落数量**



/root/siton-data-0553377b2d664236bad5b5d0ba8aa419/workspace/GainRAG/GainRAG/data/selector.py
从大的训练集中抽取小训练集


{"query": "in what year does the novel brave new world take place", "pos": ["\"Brave New World\"\nrolled off his assembly line. The novel's Gregorian calendar year is AD 2540, but it is referred to in the book as AF 632. From birth, members of every class are indoctrinated by recorded voices repeating slogans while they sleep (called \"\"hypnopædia\"\" in the book) to believe their own class is superior, but that the other classes perform needed functions. Any residual unhappiness is resolved by an antidepressant and hallucinogenic drug called \"\"soma.\"\" The biological techniques used to control the populace in \"\"Brave New World\"\" do not include genetic engineering; Huxley wrote the book before the structure of DNA was"], "neg": ["\"Brave New World\"\nbook's principles applied in everything he encountered after leaving San Francisco. The novel opens in the World State city of London in AF (After Ford) 632 (AD 2540 in the Gregorian calendar), where citizens are engineered through artificial wombs and childhood indoctrination programmes into predetermined classes (or castes) based on intelligence and labour. Lenina Crowne, a hatchery worker, is popular and sexually desirable, but Bernard Marx, a psychologist, is not. He is shorter in stature than the average member of his high caste, which gives him an inferiority complex. His work with sleep-learning allows him to understand, and disapprove of,", "Brentford\nof Hounslow. It currently plays in the Football League Championship. It was founded in 1889 by members of the defunct Brentford Rowing Club and plays its home games at Griffin Park, its home stadium since 1904. The club has a long-standing rivalry with near neighbours, Fulham. Nearest London Underground stations: Nearest railway stations: Brentford industrial status and the Great West Road are notable facets of Aldous Huxley's 1932 \"\"Brave New World\"\", a novel. Set in London in AD 2540 (632 A.F.—\"\"After Ford\"\"), the influential dystopia anticipates changes in reproductive technology, sleep-learning, psychological manipulation, and classical conditioning that combine to change", "\"Brave New World\"\nBrave New World Brave New World is a dystopian novel written in 1931 by English author Aldous Huxley, and published in 1932. Largely set in a futuristic World State of genetically modified citizens and an intelligence-based social hierarchy, the novel anticipates huge scientific developments in reproductive technology, sleep-learning, psychological manipulation, and classical conditioning that are combined to make a utopian society that goes challenged only by a single outsider. Huxley followed this book with a reassessment in an essay, \"\"Brave New World Revisited\"\" (1958), and with \"\"Island\"\" (1962), his final novel. In 1999, the Modern Library ranked \"\"Brave New World\"\"", "\"Nineteen Eighty-Four\"\ntwo novels, including Huxley's own \"\"Brave New World Revisited\"\". Comparisons with other dystopian novels like \"\"The Handmaid's Tale\"\", \"\"Virtual Light\"\", \"\"The Private Eye\"\" and \"\"The Children of Men\"\" have also been drawn. Nineteen Eighty-Four Nineteen Eighty-Four, often published as 1984, is a dystopian novel by English writer George Orwell published in June 1949. The novel is set in the year 1984 when most of the world population have become victims of perpetual war, omnipresent government surveillance and propaganda. In the novel, Great Britain (\"\"Airstrip One\"\") has become a province of a superstate named Oceania. Oceania is ruled by the \"\"Party\"\",", "\"World State in Brave New World\"\nWorld State in Brave New World The World State is the primary setting of Aldous Huxley's 1932 novel \"\"Brave New World\"\". In the novel, the World State is a unified government which administers the entire planet, with a few isolated exceptions. The motto of the World State is \"\"Community, Identity, Stability\"\". The citizens of the World State use a calendar which takes the year 1908 AD (\"\"0 AF\"\" – \"\"After Ford\"\") as its epoch, as this was the first year in which the Model T automobile was produced by the Ford Motor Company. According to the novel, the \"\"Nine Years'", "\"World State in Brave New World\"\nControllers instead united the planet into the One World State and began a peaceful campaign of change. This campaign included the closing of museums, the suppression of almost all literature published before 150 AF (2058 AD), and the destruction of the few historical world monuments that had survived the Nine Years' War. It also crucially includes ectogenesis, neo-Pavlovian conditioning and hypnopaedia, which stop dissent before it even starts through conditioning, as described in the novel. By the time the novel is set, the World State is fully established and almost all the people of Earth are citizens. At the time", "\"Brave New World (seaQuest 2032)\"\nBrave New World (seaQuest 2032) \"\"Brave New World\"\" is the first episode of the science-fiction television series \"\"seaQuest DSV\"\"`s third season, now under the new title of \"\"seaQuest 2032.\"\" It was originally shown on September 20, 1995. The episode is notorious for skipping forward in time ten years following the second season finale, Splashdown, and marks the final appearance of Nathan Bridger as captain of the \"\"seaQuest\"\". The episode also introduces Captain Oliver Hudson as he assumes command of the boat. The episode's title is also a reference to the Aldous Huxley novel of the same name, which deals with", "\"Utopian and dystopian fiction\"\nas an influence on his \"\"Nineteen Eighty-Four\"\", a novel about Oceania, a state at perpetual war, its population controlled through propaganda. Big Brother and the daily Two Minutes Hate set the tone for an all-pervasive self-censorship. Aldous Huxley's novel \"\"Brave New World\"\" started as a parody of utopian fiction, and projected into the year 2540 industrial and social changes he perceived in 1931, leading to industrial success by a coercively persuaded population divided into five castes; the World State kills everyone 60 years old or older. Anthony Burgess's 1962 novel \"\"A Clockwork Orange\"\" is set in a future England that", "\"Puttenham, Surrey\"\nadding \"\"810\"\" before the original 3 digit Puttenham exchange telephone number. Since the STD dialling code for Guildford is now 01483, the original 3 digit number is now dialled as (01483) 810***\"\" where \"\"***\"\" is the original Puttenham exchange 3 digit number. For example, what was Puttenham 555 is now dialled as (01483) 810555. The village features in \"\"Brave New World\"\", a dystopian novel by Aldous Huxley: \"\"Puttenham was a modest little village nine stories high, with silos, a poultry farm, and a small vitamin-D factory.\"\" Natalie Young's \"\"Season to Taste\"\" (2014) is mostly set in Puttenham. The average level", "\"Nineteen Eighty-Four\"\nNineteen Eighty-Four Nineteen Eighty-Four, often published as 1984, is a dystopian novel by English writer George Orwell published in June 1949. The novel is set in the year 1984 when most of the world population have become victims of perpetual war, omnipresent government surveillance and propaganda. In the novel, Great Britain (\"\"Airstrip One\"\") has become a province of a superstate named Oceania. Oceania is ruled by the \"\"Party\"\", who employ the \"\"Thought Police\"\" to persecute individualism and independent thinking. The Party's leader is Big Brother, who enjoys an intense cult of personality but may not even exist. The protagonist of", "\"Brave New World\"\nhis society's methods of keeping its citizens peaceful, which includes their constant consumption of a soothing, happiness-producing drug called \"\"soma\"\". Courting disaster, Bernard is vocal and arrogant about his criticisms, and his boss contemplates exiling him to Iceland because of his nonconformity. His only friend is Helmholtz Watson, a gifted writer who finds it difficult to use his talents creatively in their pain-free society. Bernard takes a holiday with Lenina outside the World State to a Savage Reservation in New Mexico, in which the two observe natural-born people, disease, the aging process, other languages, and religious lifestyles for the first", "\"World State in Brave New World\"\ntime on their hands. This, explains Mond, is not in the World State's best interests, following a previous experiment in Ireland, which revealed that more advanced technology simply led to widespread boredom and increased use of soma. Although the citizens of Brave New World enjoy apparently very advanced gadgets, they are unaware that human technology has in fact been limited artificially. World State in Brave New World The World State is the primary setting of Aldous Huxley's 1932 novel \"\"Brave New World\"\". In the novel, the World State is a unified government which administers the entire planet, with a few", "\"Year Zero (video game)\"\n\"\"Brave New World\"\" (use of drugs to subdue the populace), Ray Bradbury's \"\"Fahrenheit 451\"\" (large-scale censorship and uniformism), and Yevgeny Zamyatin's \"\"We\"\" (synthesis of church and state). Specific plot elements bear a resemblance to the Philip K. Dick short story \"\"Faith of Our Fathers\"\", including hallucinogens in the water supply, an oppressive, heavily militaristic state, aggressive government monitoring of the populace, and a venerated entity which manifests in many forms. In keeping with the dystopian theme, Year Zero takes place in 2022, the same year as the 1973 film \"\"Soylent Green\"\". The story takes place in the United States in", "\"Brave New World\"\nNatasha Randall, Orwell believed that Huxley was lying. The scientific futurism in \"\"Brave New World\"\" is believed to be cribbed from \"\"Daedalus\"\" by J. B. S. Haldane. The events of the Depression in Britain in 1931, with its mass unemployment and the abandonment of the gold currency standard, persuaded Huxley to assert that stability was the \"\"primal and ultimate need\"\" if civilisation was to survive the present crisis. The \"\"Brave New World\"\" character Mustapha Mond, Resident World Controller of Western Europe, is named after Sir Alfred Mond. Shortly before writing the novel, Huxley visited Mond's technologically advanced plant near Billingham,", "\"Brave New World\"\nof All Worlds\"\"), an allusion to an expression used by the philosopher Gottfried Leibniz and satirised in \"\"Candide, Ou l'Optimisme\"\" by Voltaire (1759). Huxley wrote \"\"Brave New World\"\" while living in Sanary-sur-Mer, France, in the four months from May to August 1931. By this time, Huxley had already established himself as a writer and social satirist. He was a contributor to \"\"Vanity Fair\"\" and \"\"Vogue\"\" magazines, and had published a collection of his poetry (\"\"The Burning Wheel\"\", 1916) and four successful satirical novels: \"\"Crome Yellow\"\" (1921), \"\"Antic Hay\"\" (1923), \"\"Those Barren Leaves\"\" (1925), and \"\"Point Counter Point\"\" (1928). \"\"Brave New", "Dystopia\nand the dreary existence of the working class. In the novel \"\"Brave New World\"\", written in 1931 by Aldous Huxley, a class system is prenatally determined with Alphas, Betas, Gammas, Deltas and Epsilons, with the lower classes having reduced brain-function and special conditioning to make them satisfied with their position in life. Outside of this society there also exist several human settlements that exist in the \"\"conventional\"\" way but which the class system describe as \"\"savages\"\". In \"\"Ypsilon Minus\"\" by Herbert W. Franke, people are divided into numerous alphabetically ranked groups. Some fictional dystopias, such as \"\"Brave New World\"\" and", "Novel\nof ways, ranging from the early, technological adventure Jules Verne had made fashionable in the 1860s, to Aldous Huxley's \"\"Brave New World\"\" (1932) about Western consumerism and technology. George Orwell's \"\"Nineteen Eighty-Four\"\" (1949) deals with totalitarianism and surveillance, among other matters, while Stanisław Lem, Isaac Asimov and Arthur C. Clarke produced modern classics which focus on the interaction between humans and machines. The surreal novels of Philip K Dick such as \"\"The Three Stigmata of Palmer Eldritch\"\" explore the nature of reality, reflecting the widespread recreational experimentation with drugs and cold-war paranoia of the 60's and 70's. Writers such as", "\"Nineteen Eighty-Four\"\ntoured the UK and played an extended run in London's West End. The play opened on Broadway in 2017. In the decades since the publication of \"\"Nineteen Eighty-Four\"\", there have been numerous comparisons to Aldous Huxley's novel \"\"Brave New World\"\", which had been published 17 years earlier, in 1932. They are both predictions of societies dominated by a central government and are both based on extensions of the trends of their times. However, members of the ruling class of \"\"Nineteen Eighty-Four\"\" use brutal force, torture and mind control to keep individuals in line, while rulers in \"\"Brave New World\"\" keep", "\"Brave Old World (comics)\"\nBrave Old World (comics) Brave Old World is a four issue comic book miniseries published by Vertigo Comics. It is about a group of computer hackers who at the turn of the year 2000 are working on a solution to the Y2K bug when they are transported back in time a hundred years to 1900. The series follows their adventures as they try to build a computer using the technology of the time, in order to make their way back to their own time. The first issue came out in February 2000. The story is by William Messner-Loebs, and the"], "pos_scores": [0.8693827669629228], "neg_scores": [0.8620525858440126, 0.5453200945866669, 0.5000419665999151, 0.33804582962771257, 0.2801680962762463, 0.26180934356710034, 0.24333124841969964, 0.18516409287994215, 0.1454424289303312, 0.13700047036044172, 0.10650746802678862, 0.08686193021976353, 0.08671606067693406, 0.05585074834983992, 0.048185013072292025, 0.047851677371684755, 0.04767947100578751, 0.015012335567897179, 0.00688935958658575], "prompt": "Given a query A and a passage B, determine whether the passage directly or indirectly contains an answer to the query by providing a prediction of either 'Yes' or 'No'."}







分析 分数的分布

/root/siton-data-0553377b2d664236bad5b5d0ba8aa419/workspace/GainRAG/GainRAG/data/data_analyse.py


/root/siton-data-0553377b2d664236bad5b5d0ba8aa419/workspace/GainRAG/GainRAG/data/data-analyse-1.ipynb